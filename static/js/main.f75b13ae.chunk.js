(this["webpackJsonpreact_todo-app"]=this["webpackJsonpreact_todo-app"]||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var c=n(12),r=n.n(c),o=n(7),a=(n(19),n(20),n(21),n(11)),s=n(14),u=n(6),i=n(5),l=n(3),d=n.n(l),p=n(0),j=n(2),f=n(1),b=function(e){var t=e.onTodoAdd,n=Object(p.useState)(""),c=Object(i.a)(n,2),r=c[0],o=c[1];return Object(f.jsx)("form",{onSubmit:function(e){e.preventDefault(),t({id:0,title:r,userId:2450,completed:!1}),o("")},children:Object(f.jsx)("input",{type:"text",className:"new-todo",placeholder:"What needs to be done?",value:r,onChange:function(e){return o(e.target.value)}})})},h=function(e){var t=e.clearCompleted,n=e.activeTodosLength,c=e.completedTodosLength;return Object(f.jsxs)("footer",{className:"footer",children:[Object(f.jsx)("span",{className:"todo-count",children:"".concat(n," items left")}),Object(f.jsxs)("ul",{className:"filters",children:[Object(f.jsx)("li",{children:Object(f.jsx)(o.b,{to:"/",className:function(e){return e.isActive?"selected":""},children:"All"})}),Object(f.jsx)("li",{children:Object(f.jsx)(o.b,{to:"/active",className:function(e){return e.isActive?"selected":""},children:"Active"})}),Object(f.jsx)("li",{children:Object(f.jsx)(o.b,{to:"/completed",className:function(e){return e.isActive?"selected":""},children:"Completed"})})]}),c>0&&Object(f.jsx)("button",{type:"button",className:"clear-completed",onClick:function(){return t()},children:"Clear completed"})]})},m=n(13),O=n.n(m),v=function(e){var t=e.todo,n=e.onTodoDelete,c=e.onTodoUpdate,r=Object(p.useState)(t.title),o=Object(i.a)(r,2),a=o[0],s=o[1],u=Object(p.useState)(!1),l=Object(i.a)(u,2),d=l[0],j=l[1],b=Object(p.useRef)(null),h=Object(p.useCallback)((function(e){var n;27===e.keyCode&&(s(t.title),null===(n=b.current)||void 0===n||n.blur())}),[t]),m=function(){var e;j(!1),a?a!==t.title&&(e=a,c(t.id,{title:e})):n(t.id),document.removeEventListener("keyup",h)};return Object(f.jsxs)("li",{className:O()({completed:t.completed},{editing:d}),onDoubleClick:function(){j(!0),document.addEventListener("keyup",h),requestAnimationFrame((function(){var e;null===(e=b.current)||void 0===e||e.focus()}))},children:[Object(f.jsxs)("div",{className:"view",children:[Object(f.jsx)("input",{type:"checkbox",className:"toggle",checked:t.completed,onChange:function(e){return n=e.target.checked,void c(t.id,{completed:n});var n}}),Object(f.jsx)("label",{children:t.title}),Object(f.jsx)("button",{type:"button",className:"destroy",onClick:function(){return n(t.id)}})]}),Object(f.jsx)("input",{type:"text",className:"edit",ref:b,value:a,onChange:function(e){return s(e.target.value)},onBlur:function(){return m()},onKeyPress:function(e){var t;"Enter"===e.key&&(null===(t=b.current)||void 0===t||t.blur())}})]},t.id)},x=function(e){var t=e.todos,n=e.onTodoDelete,c=e.onTodoUpdate;return Object(f.jsx)("ul",{className:"todo-list",children:t.map((function(e){return Object(f.jsx)(v,{todo:e,onTodoDelete:n,onTodoUpdate:c},e.id)}))})},g=function(){return Object(f.jsx)("h1",{children:"Something went wrong..."})},k=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://mate.academy/students-api/users","/").concat("2450"));case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w="https://mate.academy/students-api/todos",y=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(w,"?userId=2450"));case 2:return t=e.sent,e.abrupt("return",t.json());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(d.a.mark((function e(t){var n,c,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,c=t.userId,r=t.completed,e.next=3,fetch(w,{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({title:n,userId:c,completed:r})}).catch((function(e){return window.location.replace("".concat(".","/hello404")),e}));case 3:return o=e.sent,e.abrupt("return",o.json());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(w,"/").concat(t),{method:"DELETE"}).catch((function(){return window.location.replace("".concat(".","/hello404"))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("".concat(w,"/").concat(t),{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(n)}).catch((function(){return window.location.replace("".concat(".","/hello404"))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(p.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(p.useState)(null),o=Object(i.a)(r,2),l=o[0],m=o[1];Object(p.useEffect)((function(){Promise.all([k(),y()]).then((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];m(n),c(r)}))}),[]);var O=Object(p.useMemo)((function(){return n.filter((function(e){return e.completed}))}),[n]),v=Object(p.useMemo)((function(){return n.filter((function(e){return!e.completed}))}),[n]),w=Object(p.useCallback)(function(){var e=Object(u.a)(d.a.mark((function e(t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(t);case 2:r=e.sent,c([].concat(Object(s.a)(n),[r]));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),E=Object(p.useCallback)(function(){var e=Object(u.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t,n);case 2:c((function(e){return e.map((function(e){return e.id===t?Object(a.a)(Object(a.a)({},e),n):e}))}));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[n]),S=Object(p.useCallback)(function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(t);case 2:c((function(e){return e.filter((function(e){return e.id!==t}))}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),A=Object(p.useCallback)(function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.forEach((function(e){t.target.checked&&!e.completed?E(e.id,{completed:!0}):!t.target.checked&&e.completed&&E(e.id,{completed:!1})}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n]),D=Object(p.useCallback)(Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.forEach((function(e){e.completed&&S(e.id)}));case 1:case"end":return e.stop()}}),e)}))),[n]);return Object(f.jsxs)("section",{className:"todoapp",children:[Object(f.jsxs)("header",{className:"header",children:[Object(f.jsx)("h1",{children:"".concat((null===l||void 0===l?void 0:l.name)||"Loading..."," todos")}),Object(f.jsx)(b,{onTodoAdd:w})]}),Object(f.jsxs)("section",{className:"main",children:[n.length>0&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("input",{type:"checkbox",id:"toggle-all",className:"toggle-all",checked:n.every((function(e){return e.completed})),onChange:A}),Object(f.jsx)("label",{htmlFor:"toggle-all",children:"Mark all as complete"})]}),Object(f.jsxs)(j.c,{children:[Object(f.jsx)(j.a,{path:"/",element:Object(f.jsx)(x,{todos:n,onTodoDelete:S,onTodoUpdate:E})}),Object(f.jsx)(j.a,{path:"/active",element:Object(f.jsx)(x,{todos:v,onTodoDelete:S,onTodoUpdate:E})}),Object(f.jsx)(j.a,{path:"/completed",element:Object(f.jsx)(x,{todos:O,onTodoDelete:S,onTodoUpdate:E})}),Object(f.jsx)(j.a,{path:"*",element:Object(f.jsx)(g,{})})]})]}),n.length>0&&Object(f.jsx)(h,{clearCompleted:D,activeTodosLength:v.length,completedTodosLength:O.length})]})};r.a.render(Object(f.jsx)(o.a,{children:Object(f.jsx)(E,{})}),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.f75b13ae.chunk.js.map